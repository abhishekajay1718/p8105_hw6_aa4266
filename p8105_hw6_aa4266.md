P8105\_HW6\_AA4266
================
Abhishek Ajay (aa4266)
November 25, 2018

Problem 1
=========

Here we work on the homicides data from 50 large U.S. cities that has been gathered by The Washington Post.

**Data Import**

``` r
hom_data = 
  read_csv("./data/homicide-data.csv") %>% 
  mutate(city_state = paste(city, state, sep = ", "), 
         disposition = as.factor(disposition),
         bin_disposition = as.numeric(disposition == "Closed by arrest")) %>% 
  filter(!(city_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL"))) %>% 
  mutate(victim_race = as.factor(ifelse(victim_race == "White", "white", "non-white")), 
         victim_age = as.numeric(victim_age))
```

    ## Parsed with column specification:
    ## cols(
    ##   uid = col_character(),
    ##   reported_date = col_integer(),
    ##   victim_last = col_character(),
    ##   victim_first = col_character(),
    ##   victim_race = col_character(),
    ##   victim_age = col_character(),
    ##   victim_sex = col_character(),
    ##   city = col_character(),
    ##   state = col_character(),
    ##   lat = col_double(),
    ##   lon = col_double(),
    ##   disposition = col_character()
    ## )

    ## Warning in evalq(as.numeric(victim_age), <environment>): NAs introduced by
    ## coercion

In bin\_disposition, **1** means, Closed by arrest and **0** means elsewise.

Now we fit a logistic regression with resolved vs unresolved as the outcome and victim age, sex and race as predictors.

``` r
fit_logistic_baltimore_white_OR = 
  hom_data %>% 
  filter(city_state == "Baltimore, MD") %>% 
  glm(bin_disposition ~ victim_age + victim_sex + victim_race, data = ., family = binomial()) %>% 
  broom::tidy() %>% 
  filter(term == "victim_racewhite") %>% 
  mutate(OR = exp(estimate), CI_OR_0.025 = OR - 1.96 * std.error, CI_OR_0.975 = OR + 1.96 * std.error) #95% CI, therefore alpha is 1.96
```
